diff -Nur -x '*.orig' -x '*.rej' e-smith-mysql-1.12.0/root/etc/e-smith/templates/etc/e-smith/sql/init/00_restore_dumped_dbs mezzanine_patched_e-smith-mysql-1.12.0/root/etc/e-smith/templates/etc/e-smith/sql/init/00_restore_dumped_dbs
--- e-smith-mysql-1.12.0/root/etc/e-smith/templates/etc/e-smith/sql/init/00_restore_dumped_dbs	2006-03-16 17:44:28.000000000 +1100
+++ mezzanine_patched_e-smith-mysql-1.12.0/root/etc/e-smith/templates/etc/e-smith/sql/init/00_restore_dumped_dbs	2006-04-10 18:04:38.391665345 +1000
@@ -1,8 +1,7 @@
 #! /bin/sh
 
-( cat /home/e-smith/db/mysql/mysql.dump ;
-  echo "use mysql; ALTER TABLE user MODIFY Password char(41) NOT NULL default '';" ;
-  cat /service/mysqld/set.password ) | mysql
+mysql < /var/service/mysqld/set.password
+
 P=$(cat /var/run/mysqld/mysqld.pid)
 /bin/rm /var/run/mysqld/mysqld.pid
 kill -TERM $P
diff -Nur -x '*.orig' -x '*.rej' e-smith-mysql-1.12.0/root/etc/e-smith/templates/var/service/mysqld/set.password mezzanine_patched_e-smith-mysql-1.12.0/root/etc/e-smith/templates/var/service/mysqld/set.password
--- e-smith-mysql-1.12.0/root/etc/e-smith/templates/var/service/mysqld/set.password	2006-03-16 17:44:28.000000000 +1100
+++ mezzanine_patched_e-smith-mysql-1.12.0/root/etc/e-smith/templates/var/service/mysqld/set.password	2006-04-10 15:36:44.156830995 +1000
@@ -4,6 +4,7 @@
     my $pw = esmith::util::LdapPassword();
 
     $OUT .= "use mysql;\n";
+    $OUT .= "ALTER TABLE user MODIFY Password char(41) NOT NULL default '';\n";
     $OUT .= "UPDATE user SET password=password('$pw') WHERE user='root';\n";
     $OUT .= "DELETE FROM user WHERE user='';\n";
     $OUT .= "FLUSH PRIVILEGES\n";
